<!DOCTYPE html>
<html lang="zh">
    <head>
    <!-- 
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.2 -->

    <!-- Title -->
    
    <title>
        
            JavaScript的this | 
        
        Grommash
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Meta & Info -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="GuYi">
    <meta name="description" content="null">
    <meta name="keywords" content="null,JavaScript">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Grommash">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="JavaScript的this | Grommash">
    <meta property="og:description" content="null">
    <meta property="og:article:tag" content="JavaScript"> 

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS & jQuery -->
    
        <link rel="stylesheet" href="/css/material.min.css">
        <link rel="stylesheet" href="/css/style.min.css">
        <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }
</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


        <script src="/js/jquery.min.js"></script>
        <script src="/js/queue.js"></script>
    

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    

    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#this"><span class="post-toc-number">1.</span> <span class="post-toc-text">this</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#全局上下文"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">全局上下文</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#函数上下文"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">函数上下文</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#简单的调用"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">简单的调用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#对象方法"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">对象方法</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#构造函数"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">构造函数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#作为DOM事件处理者"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">作为DOM事件处理者</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#call函数"><span class="post-toc-number">2.</span> <span class="post-toc-text">call函数</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#apply函数"><span class="post-toc-number">3.</span> <span class="post-toc-text">apply函数</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#bind函数"><span class="post-toc-number">4.</span> <span class="post-toc-text">bind函数</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#胖箭头函数"><span class="post-toc-number">5.</span> <span class="post-toc-text">胖箭头函数</span></a></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script>
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').css('background-image', 'url(' + '/img/random/material-' + randomNum + '.png' + ')');
</script>

        
    
            <p class="article-headline-p">
                JavaScript的this
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/grommash_avatar.jpeg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>GuYi</strong>
        <span>11月 22, 2016</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/JavaScript/">JavaScript</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>最近在学JavaScript，就记录一些学习的心得吧。</p>
<h1 id="this"><a href="#this" class="headerlink" title="this"></a>this</h1><p>开始了解JavaScript的时候，对于this理解很费劲，毕竟在ES6之前没有class，习惯了普通面向对象语言的人就很不习惯，虽然现在网上资料很多，但是有时候资料多也不是什么好事，看了<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this" target="_blank" rel="external">MDN</a>的文档，觉得上面的描述清晰多了，接下来本文主要大致的描述一下this的使用场景。</p>
<a id="more"></a>
<p>首先this作为函数关键字和其他语言不太一样，而对他自己来说，在严格模式和非严格模式中意义也不同。</p>
<p>this的指向在函数定义的时候是确定不了的，只有函数执行的时候才能确定this到底指向谁，实际上this的最终指向的是那个调用它的对象，而每次函数调用时这个this的值也可能是不一样的。ES5使用bind方法来设置this的值无论这个函数什么时候调用,ECMAScript 2015中引入箭头函数来决定this的词法作用域(它设置this的值在封闭的执行上下文中)。</p>
<h2 id="全局上下文"><a href="#全局上下文" class="headerlink" title="全局上下文"></a>全局上下文</h2><p>在全局上下文中不管是不是严格模式，this都表示全局对象。<br>在严格版中的默认的this不再是window，而是undefined。<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span>.document === <span class="built_in">document</span>); <span class="comment">/* true */</span></div><div class="line"></div><div class="line"><span class="comment">/* In web browsers, the window object is also the global object: */</span></div><div class="line"><span class="built_in">console</span>.log(<span class="keyword">this</span> === <span class="built_in">window</span>); <span class="comment">/* true */</span></div><div class="line"></div><div class="line"><span class="keyword">this</span>.a = <span class="number">37</span>;</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.a); <span class="comment">/* 37 */</span></div></pre></td></tr></table></figure></p>
<h2 id="函数上下文"><a href="#函数上下文" class="headerlink" title="函数上下文"></a>函数上下文</h2><p>在函数中，this的值取决于这个函数是怎么调用的。</p>
<h3 id="简单的调用"><a href="#简单的调用" class="headerlink" title="简单的调用"></a>简单的调用</h3><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/* In a browser: */</span></div><div class="line">f1() === <span class="built_in">window</span>; <span class="comment">/* the window is the global object in browsers */</span></div><div class="line"></div><div class="line"><span class="comment">/* In Node: */</span></div><div class="line">f1() === global</div></pre></td></tr></table></figure>
<h3 id="对象方法"><a href="#对象方法" class="headerlink" title="对象方法"></a>对象方法</h3><p>如果this作为一个对象方法，他指向调用方法的对象。<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;</div><div class="line">  <span class="attr">prop</span>: <span class="number">37</span>,</div><div class="line">  <span class="attr">f</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.prop;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(o.f()); <span class="comment">/* logs 37 */</span></div></pre></td></tr></table></figure></p>
<p>注意,这种行为是不受或者函数是如何定义的。在前面的示例中,我们定义了内联函数f在o的定义。然而,我们可以简单地定义了函数在对象外,后来将它连接到o.f.这样做结果相同:<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;<span class="attr">prop</span>: <span class="number">37</span>&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">independent</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.prop;</div><div class="line">&#125;</div><div class="line"></div><div class="line">o.f = independent;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(o.f()); <span class="comment">/* logs 37 */</span></div></pre></td></tr></table></figure></p>
<p>或者这样：<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line">o.b = &#123;<span class="attr">g</span>: independent, <span class="attr">prop</span>: <span class="number">42</span>&#125;;</div><div class="line"><span class="built_in">console</span>.log(o.b.g()); <span class="comment">/* logs 42 */</span></div></pre></td></tr></table></figure></p>
<p>甚至这样：<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;<span class="attr">f</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="keyword">this</span>.b; &#125;&#125;;</div><div class="line"><span class="keyword">var</span> p = <span class="built_in">Object</span>.create(o);</div><div class="line">p.a = <span class="number">1</span>;</div><div class="line">p.b = <span class="number">4</span>;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(p.f()); <span class="comment">/* 5 */</span></div></pre></td></tr></table></figure></p>
<p>只要记住this就是指向函数调用对象就行。<br>同样，在setter和getter方法中原理也是一样的：<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.a + <span class="keyword">this</span>.b + <span class="keyword">this</span>.c;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> o = &#123;</div><div class="line">  <span class="attr">a</span>: <span class="number">1</span>,</div><div class="line">  <span class="attr">b</span>: <span class="number">2</span>,</div><div class="line">  <span class="attr">c</span>: <span class="number">3</span>,</div><div class="line">  get average() &#123;</div><div class="line">    <span class="keyword">return</span> (<span class="keyword">this</span>.a + <span class="keyword">this</span>.b + <span class="keyword">this</span>.c) <span class="comment">/* 3 */</span>;</div><div class="line">  &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="built_in">Object</span>.defineProperty(o, <span class="string">'sum'</span>, &#123;</div><div class="line">    <span class="attr">get</span>: sum, <span class="attr">enumerable</span>:<span class="literal">true</span>, <span class="attr">configurable</span>:<span class="literal">true</span>&#125;);</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(o.average, o.sum); <span class="comment">/* logs 2, 6 */</span></div></pre></td></tr></table></figure></p>
<h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><p>当一个函数作为构造函数(new关键字)，this会被绑定到构造的新对象。<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.a = <span class="number">37</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> C();</div><div class="line"><span class="built_in">console</span>.log(o.a); <span class="comment">/* logs 37 */</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">C2</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="keyword">this</span>.a = <span class="number">37</span>;</div><div class="line">  <span class="keyword">return</span> &#123;<span class="attr">a</span>:<span class="number">38</span>&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">o = <span class="keyword">new</span> C2();</div><div class="line"><span class="built_in">console</span>.log(o.a); <span class="comment">/* logs 38 */</span></div></pre></td></tr></table></figure></p>
<h3 id="作为DOM事件处理者"><a href="#作为DOM事件处理者" class="headerlink" title="作为DOM事件处理者"></a>作为DOM事件处理者</h3><p>如果函数作为DOM事件的处理者，this指向执行的元素。<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line">&lt;button onclick=<span class="string">"alert(this.tagName.toLowerCase());"</span>&gt;</div><div class="line">  Show <span class="keyword">this</span></div><div class="line">&lt;<span class="regexp">/button&gt;</span></div></pre></td></tr></table></figure></p>
<p>这里的this指的时button这个元素<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line">&lt;button onclick=<span class="string">"alert((function()&#123;return this&#125;)());"</span>&gt;</div><div class="line">  Show inner <span class="keyword">this</span></div><div class="line">&lt;<span class="regexp">/button&gt;</span></div></pre></td></tr></table></figure></p>
<p>在这里，因为没有设置this的值，所以this指向全局对象(window)</p>
<h1 id="call函数"><a href="#call函数" class="headerlink" title="call函数"></a>call函数</h1><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> o1 = &#123;</div><div class="line">    <span class="attr">a</span>: <span class="number">3</span>,</div><div class="line">    <span class="attr">fn</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> o2 = o1.fn;</div><div class="line">o2(); <span class="comment">/*undefined */</span></div></pre></td></tr></table></figure>
<p>在上述情况下你会发现o2函数中的this已经不是指向o1的a，这很好理解，因为函数调用对象不是o1，但是有时候我们不得不将这个对象保存到另外的一个变量中，那么就可以通过以下方法：<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> o1 = &#123;</div><div class="line">    <span class="attr">a</span>: <span class="number">3</span>,</div><div class="line">    <span class="attr">fn</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.a); <span class="comment">/* 3 */</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> o2 = o1.fn;</div><div class="line">o2.call(o1);</div></pre></td></tr></table></figure></p>
<p>通过在call方法中给第一个参数添加要把b添加到哪个环境中，简单来说，this就会指向那个对象。</p>
<p>call方法除了第一个参数以外还可以添加多个参数，如下：<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> o1 = &#123;</div><div class="line">    <span class="attr">a</span>: <span class="number">3</span>,</div><div class="line">    <span class="attr">fn</span>: <span class="function"><span class="keyword">function</span>(<span class="params">b,c</span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.a); <span class="comment">/* 3 */</span></div><div class="line">        <span class="built_in">console</span>.log(b + c);  <span class="comment">/* 3 */</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> o2 = o1.fn;</div><div class="line">o2.call(o1,<span class="number">1</span>,<span class="number">2</span>);</div></pre></td></tr></table></figure></p>
<h1 id="apply函数"><a href="#apply函数" class="headerlink" title="apply函数"></a>apply函数</h1><p>apply方法和call方法有些相似，它也可以改变this的指向：<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> o1 = &#123;</div><div class="line">    <span class="attr">a</span>: <span class="number">3</span>,</div><div class="line">    <span class="attr">fn</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.a); <span class="comment">/* 3 */</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> o2 = o1.fn;</div><div class="line">o2.apply(o1);</div></pre></td></tr></table></figure></p>
<p>同样apply也可以有多个参数，但是不同的是，第二个参数必须是一个数组，如下：<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> o1 = &#123;</div><div class="line">    <span class="attr">a</span>: <span class="number">3</span>,</div><div class="line">    <span class="attr">fn</span>: <span class="function"><span class="keyword">function</span>(<span class="params">b,c</span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.a); <span class="comment">/* 3 */</span></div><div class="line">        <span class="built_in">console</span>.log(b + c);  <span class="comment">/* 3 */</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> o2 = o1.fn;</div><div class="line">o2.apply(o1,[<span class="number">1</span>,<span class="number">2</span>]]);</div></pre></td></tr></table></figure></p>
<p><strong>注意如果call和apply的第一个参数写的是null，那么this指向的是window对象</strong></p>
<p><strong>call和apply的区别只在于这两个函数接受的参数形式不同。</strong></p>
<h1 id="bind函数"><a href="#bind函数" class="headerlink" title="bind函数"></a>bind函数</h1><p>bind方法和call、apply方法有些不同，实际上bind方法返回的是一个修改过后的函数<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> o1 = &#123;</div><div class="line">    <span class="attr">a</span>: <span class="number">3</span>,</div><div class="line">    <span class="attr">fn</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> o2 = o1.fn;</div><div class="line"><span class="built_in">console</span>.log(o2.bind(o1)); <span class="comment">//function() &#123; console.log(this.a); &#125;</span></div></pre></td></tr></table></figure></p>
<p>因此我们可以用这个函数来完成你想要的需求:<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> o1 = &#123;</div><div class="line">    <span class="attr">a</span>: <span class="number">3</span>,</div><div class="line">    <span class="attr">fn</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.a); <span class="comment">/* 3 */</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> o2 = o1.fn;</div><div class="line"><span class="keyword">var</span> o3 = o2.bind(o1);</div><div class="line">o3();</div></pre></td></tr></table></figure></p>
<p>同样bind也可以有多个参数，并且参数可以执行的时候再次添加，但是要注意的是，参数是按照形参的顺序进行的。<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> o1 = &#123;</div><div class="line">    <span class="attr">a</span>: <span class="number">3</span>,</div><div class="line">    <span class="attr">fn</span>: <span class="function"><span class="keyword">function</span>(<span class="params">b,c,d</span>)</span>&#123;</div><div class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.a); <span class="comment">/* 3 */</span></div><div class="line">        <span class="built_in">console</span>.log(b+c+d);  <span class="comment">/* 6 */</span></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> o2 = o1.fn;</div><div class="line"><span class="keyword">var</span> o3 = o2.bind(o1,<span class="number">1</span>);</div><div class="line">o3(<span class="number">2</span>,<span class="number">3</span>);</div></pre></td></tr></table></figure></p>
<p>call和apply都是改变上下文中的this并立即执行这个函数，bind方法可以让对应的函数想什么时候调就什么时候调用，并且可以将参数在执行的时候添加，这是它们的区别，根据自己的实际情况来选择使用。</p>
<h1 id="胖箭头函数"><a href="#胖箭头函数" class="headerlink" title="胖箭头函数"></a>胖箭头函数</h1><p>胖箭头函数(Fat arrow functions)，又称箭头函数，是一个来自ECMAScript 2015(又称ES6)的全新特性。有传闻说，箭头函数的语法=&gt;，是受到了CoffeeScript的影响，并且它与CoffeeScript中的=&gt;语法一样，共享this上下文。</p>
<blockquote>
<p>反正我就觉得他只是闭包的另一种写法</p>
</blockquote>
<p>举个例子：<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getVerifiedToken</span>(<span class="params">selector</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> getUsers(selector)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span> (<span class="params">users</span>) </span>&#123; <span class="keyword">return</span> users[<span class="number">0</span>]; &#125;)</div><div class="line">    .then(verifyUser)</div><div class="line">    .then(<span class="function"><span class="keyword">function</span> (<span class="params">user, verifiedToken</span>) </span>&#123; <span class="keyword">return</span> verifiedToken; &#125;)</div><div class="line">    .catch(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123; log(err.stack); &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果用箭头函数：<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getVerifiedToken</span>(<span class="params">selector</span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> getUsers(selector)</div><div class="line">    .then(<span class="function"><span class="params">users</span> =&gt;</span> users[<span class="number">0</span>])</div><div class="line">    .then(verifyUser)</div><div class="line">    .then(<span class="function">(<span class="params">user, verifiedToken</span>) =&gt;</span> verifiedToken)</div><div class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> log(err.stack));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这个就有点像swift的闭包了，就是把in换做了=&gt;。</p>
<p>以下是值得注意的几个要点：</p>
<ul>
<li>function和{}都消失了，所有的回调函数都只出现在了一行里。</li>
<li>当只有一个参数时，()也消失了（rest参数是一个例外，如(…args) =&gt; …）。</li>
<li>当{}消失后，return关键字也跟着消失了。单行的箭头函数会提供一个隐式的return（这样的函数在其他编程语言中常被成为lamda函数）。</li>
</ul>
<p>这里再着重强调一下上述的最后一个要求。仅仅当箭头函数为单行的形式时，才会出现隐式的return。当箭头函数伴随着{}被声明，那么即使它是单行的，它也不会有隐式return：<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> getVerifiedToken = <span class="function"><span class="params">selector</span> =&gt;</span> &#123;</div><div class="line">  <span class="keyword">return</span> getUsers()</div><div class="line">    .then(<span class="function"><span class="params">users</span> =&gt;</span> users[<span class="number">0</span>])</div><div class="line">    .then(verifyUser)</div><div class="line">    .then(<span class="function">(<span class="params">user, verifiedToken</span>) =&gt;</span> verifiedToken)</div><div class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> log(err.stack));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>不幸的是，空对象{}和空白函数代码块{}长得一模一样。。以上的例子中，emptyObject的{}会被解释为一个空白函数代码块，所以emptyObject()会返回undefined。如果要在箭头函数中明确地返回一个空对象，则你不得不将{}包含在一对圆括号中({})：<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> emptyObject = <span class="function"><span class="params">()</span> =&gt;</span> (&#123;&#125;);</div><div class="line">emptyObject(); <span class="comment">/* &#123;&#125; */</span></div></pre></td></tr></table></figure></p>
<p>下面是一个更完整的例子：<br><figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</div><div class="line">() =&gt; &#123; <span class="keyword">return</span> <span class="number">1</span>; &#125;</div><div class="line">() =&gt; <span class="number">1</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123; <span class="keyword">return</span> a * <span class="number">2</span>; &#125;</div><div class="line">(a) =&gt; &#123; <span class="keyword">return</span> a * <span class="number">2</span>; &#125;</div><div class="line">(a) =&gt; a * <span class="number">2</span></div><div class="line">a =&gt; a * <span class="number">2</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123; <span class="keyword">return</span> a * b; &#125;</div><div class="line">(a, b) =&gt; &#123; <span class="keyword">return</span> a * b; &#125;</div><div class="line">(a, b) =&gt; a * b</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="built_in">arguments</span>[<span class="number">0</span>]; &#125;</div><div class="line">(...args) =&gt; args[<span class="number">0</span>]</div><div class="line"></div><div class="line">() =&gt; &#123;&#125; <span class="comment">/* undefined */</span></div><div class="line">() =&gt; (&#123;&#125;) <span class="comment">/* &#123;&#125; */</span></div></pre></td></tr></table></figure></p>
<p><strong>箭头函数没有属于自己的this和arguments</strong></p>
<p>因此箭头函数就不需要担心this的上下文问题，不管嵌套多少层，箭头函数中的this总能指向正确的上下文，因为函数体内的this指向的对象，就是定义时所在的对象，而不是使用时所在的对象。</p>
<p><strong>箭头函数不能作为generator函数使用。</strong></p>
<p>最后注意，React class中的this指向组件本身，因此在事件绑定中应该将this绑定到事件函数中。</p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    







                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2016/11/28/JavaScript-class/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2016/11/09/WebView-NSURLProtocol/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/grommash_avatar.jpeg" alt="GuYi's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        guxinqi25@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">十一月 2016<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/10/">十月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/09/">九月 2016<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/04/">四月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/03/">三月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/02/">二月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/12/">十二月 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/11/">十一月 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/09/">九月 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/08/">八月 2015<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/07/">七月 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/06/">六月 2015<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/技术/">技术<span class="sidebar_archives-count">19</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/about" title="关于">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;Grommash
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->

    <script src="/js/lazyload.min.js"></script>
    <script src="/js/js.min.js"></script>



    <script src="/js/nprogress.js"></script>


<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>














<!-- Swiftye -->


<!-- Local Search-->


<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->


                </main>
            </div>
        </body>
    
</html>
